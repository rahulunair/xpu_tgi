# Simple Weather Agent with Phi-3 4k

This example demonstrates a simple weather agent using a TGI-served Phi-3 4k model. The agent can understand natural language queries about weather, fetch real-time weather data, and respond with both structured data and friendly natural language responses.

## Prerequisites

- Python 3.8+
- A running TGI server with Phi-3 4k model (follow the TGI setup instructions in the main repository)
- Required Python packages (install via `pip install -r requirements.txt`):
  - requests
  - loguru

## Usage

1. Ensure your TGI server is running (default: http://localhost:8080)
2. Run the weather agent:
```bash
python simple_weather.py
```

## Example Interactions

Here are some examples I tried with the agent:

```bash
Weather Agent (type 'quit' to exit)

User: what is the weather in Tokyo?

Weather Data:
{
  "city": "Tokyo",
  "temperature": 8.6,
  "wind_speed": 3.4,
  "comfort": "cold",
  "timestamp": "2024-11-21 21:17:48"
}

Hey there! Looks like it's a chilly day in Tokyo with a temperature of 8.6°C. The wind is blowing at a speed of 3.4 km/h, making it feel even colder. You might want to bundle up and grab a hot cup of tea to keep yourself warm. Stay cozy!

User: what about weather in Delhi?

Weather Data:
{
  "city": "Delhi",
  "temperature": 14.6,
  "wind_speed": 2.6,
  "comfort": "cold",
  "timestamp": "2024-11-21 21:18:06"
}

Hey there! Looks like Delhi is quite chilly today with a temperature of 14.6°C. It's a bit cold, so make sure to bundle up and keep warm. The wind is blowing at a gentle 2.6 km/h, so it's not too windy. Stay cozy and enjoy your day!
```

## Features

- Natural language understanding of weather queries
- Real-time weather data fetching using Open-Meteo API
- Geocoding support using OpenStreetMap Nominatim
- Structured JSON responses with temperature, wind speed, and comfort level
- Friendly natural language responses generated by Phi-3 4k
- Detailed logging (enable with VERBOSE=1)

## Configuration

- Set VERBOSE=1 environment variable to enable detailed logging
- The TGI endpoint can be modified in the code (default: http://localhost:8080/generate)

## Notes

- The weather data is fetched in real-time from Open-Meteo API
- The comfort level is automatically determined based on temperature ranges
- The model generates both structured data and natural language responses
- Type 'quit' to exit the application
